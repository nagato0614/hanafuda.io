# 画面作成タスクリスト

> **開発方針メモ**: ルール処理などゲームロジックは後回しにし、まず画面表示（UI）から実装を進める。

## 1. 事前準備
- [x] 既存仕様の読み直し
  - [x] `spec/internal_design.md` の UI セクションを確認する。
  - [x] `spec/class_diagram.md` で依存関係を把握する。
- [x] 画面サイズポリシー策定
  - [x] 固定 1332x999（4:3・約1.3倍）と水色基調を採用する。
  - [x] Phaser キャンバスと Vue レイアウトの比率を調整する。
- [x] Bootstrap 5 設定
  - [x] 依存関係を追加し、`main.js` で CSS を読み込む。
  - [x] カラーパレットと余白スケールの下書きを用意する。
- [x] デザイントークン整理
  - [x] 背景色・フォント・シャドウなど共通値を整理する。
  - [x] カスタム変数／ユーティリティの必要性を確認する。

## 2. メインゲーム画面（対局中）
### 2.1 レイアウト基盤
- [x] ワイヤーフレーム作成
  - [x] Bootstrap / Flex を使った全体レイアウトを定義する。
  - [x] UI と Phaser のレイヤ構造（z-index）を決める。
- [x] コンポーネント階層整理
  - [x] `GameBoardView` に各コンポーネントを配置する。
  - [x] 1332x999 の比率内で余白を確定する。

### 2.2 フィールドエリア
- [x] グリッド表示
  - [x] 4列×2行（8枠）の固定レイアウトを実装する。
  - [x] 空き枠にプレースホルダーを描画する。
- [x] ダミーデータ描画
  - [x] モックカードを 8 枚並べて表示を確認する。
  - [x] 画像パスが `public/assets` を指すことを確認する。

### 2.3 手札・獲得札エリア
- [x] 手札表示
  - [x] `CardToken` のホバー／選択演出を確認する。
  - [x] `aria-pressed` などアクセシビリティ情報を付加する。
- [x] 獲得札表示
  - [x] `CapturedArea` をタブ切り替えで構成する。
  - [x] 左にプレイヤー、右に CPU を並列配置する。
- [x] カード出しフロー誘導
  - [x] 手札 → 場札 → `手札を出す` ボタンの導線を UI で示す。
  - [x] 条件を満たさない場合は赤字ログで「選択できません」を表示する。

### 2.4 スコア・操作
- [x] ステータスバー
  - [x] CPU / プレイヤーのスコアストリップを表示する。
  - [x] 手番・残り時間・コイコイ回数のバッジを配置する。
- [ ] 手番表示
  - [ ] バックエンドが提供する手番 ID を取得・反映する仕組みを設計する。
  - [ ] 受信した手番情報と UI の表示が同期されるか確認する。
- [x] アクションパネル
  - [x] ボタン列を横一列＋水平スクロール対応にする。
  - [x] ログ領域を固定高さ＋内部スクロールにする。
- [x] 手札と下部 UI のバランス
  - [x] 手札エリアは自然高さで保持し、中央領域が縮まないよう調整する。

## 3. メニュー／遷移画面
### 3.1 タイトル（MainMenu）
- [x] タイトルオーバーレイ
  - [x] `MainMenuOverlay` を実装し、スタートボタンを中央表示する。
  - [x] Phaser シーンが `MainMenu` の間だけ表示する。
- [x] ルール表示
  - [x] ルールモーダルの骨組みを作成する。

### 3.2 プリローダ（Preloader）
- [x] 進捗表示
  - [x] 進捗バーを表示し、ロード進捗で幅を更新する。
- [ ] 遷移演出
  - [ ] ロード完了時のフェードアウトなどをモックする。

### 3.3 ゲームオーバー（GameOver）
- [x] 成績表示
  - [x] スコア要約カードを配置する。
  - [x] 勝敗バッジ・役数を併記する。
- [x] ボタン動作
  - [x] 再戦／タイトルへ戻るボタンを並べる。
  - [x] クリックイベントをモックする。

## 4. グローバル UI コンポーネント
### 4.1 通知・ログ
- [ ] トースト表示
  - [ ] Bootstrap Toast で通知領域をモックする。
  - [ ] 表示位置とスタック挙動を決める。
- [x] ログリスト
  - [x] 固定高さ＋スクロールでログを表示する。
  - [x] 赤字メッセージ表示を検証する。

### 4.2 共通インタラクション
- [ ] 共通スタイル
  - [ ] ボタン／フォーム／トグルのスタイルガイドをまとめる。
  - [ ] 必要なユーティリティクラスを列挙する。
- [ ] ツールチップ
  - [ ] `CardToken` ホバー時のツールチップ挙動を設計する。
  - [ ] キーボードフォーカス時の表示方法を検討する。

### 4.3 レイアウト補助
- [x] レイヤ調整
  - [x] Phaser キャンバスと UI の重なり順を整理する。
- [x] 余白・スクロール
  - [x] 全画面時の上下余白や `body` 固定を調整する。

## 5. データモック・スタイル整備
- [x] モックデータ
  - [x] UI 検証用の JSON モックを作成する。
- [x] スタイル基盤
  - [x] Bootstrap カスタム構成（変数上書き等）を整える。
- [x] アセット整理
  - [x] 札画像／アイコンのパスを統一する。
- [ ] フォント
  - [ ] 使用フォントとライセンスを決める。
  - [ ] Web フォント読み込み方法を定義する。

## 6. 確認とレビュー
- [ ] スクリーンショット
  - [ ] タイトル／メイン／プリローダ／ゲームオーバーを撮影する。
  - [ ] 仕様との差異をレビューする。
- [ ] 操作フロー
  - [ ] カード選択→場札マッチ→結果表示を通しで確認する。
  - [ ] 課題を洗い出し TODO 化する。
- [ ] アクセシビリティ
  - [ ] キーボード操作を確認する。
  - [ ] スクリーンリーダーでの読み上げを確認する。

## 7. CPU 対戦相手
- [ ] 思考ロジック整理
  - [ ] 難易度・プレイスタイルを定義する。
- [ ] 意思決定フロー
  - [ ] 手札選択→場札確定→コイコイ判断のシーケンス図を作る。
- [ ] UI 反映
  - [ ] CPU 手番のハイライトとログ出力フォーマットを決める。

## 8. ゲームロジック
- [ ] カード出し処理
  - [ ] 手札選択→場札選択→成立判定をモジュール化する。
  - [ ] 赤字ログでのエラー表示をドメイン層から UI へ伝搬させる。
- [ ] 山札・場札更新
  - [ ] 山札ドロー、場札への配置、獲得処理を実装する。
- [ ] ターン管理
  - [ ] 手番交代・ラウンド終了条件を整理する。
  - [ ] UI 更新イベントをまとめる（ステータスバー／ログ）。

## 9. スコア計算
- [ ] 役判定
  - [ ] `YakuEvaluator` を実装し、役判定ロジックを網羅する。
  - [ ] 役ごとの加点条件を管理する。
- [ ] 点数算出
  - [ ] `ScoreCalculator` で基本点・コイコイ倍率・加点を計算する。
  - [ ] 得点結果を UI（ステータスバー・ログ）に反映する。

## 10. Phaser UI への段階的移行
- [ ] 設計方針
  - [ ] Phaser 側で描画・入力を完結させる UI 構成（ワイヤーフレーム／状態遷移）をまとめる。
  - [ ] Vue は補助 UI（メニュー／設定／ログ）に役割を限定する指針を文書化する。
- [ ] 実装ロードマップ
  - [ ] フィールド／手札表示を Phaser シーン内へ移植する手順を洗い出す。
  - [ ] 操作ログ・ステータス更新をイベント経由で Vue と連携する仕組みを定義する。
- [ ] 第1段階タスク
  - [ ] Phaser シーン用 UI コンポーネント（カード表示・選択）のプロトタイプを作成する。
  - [ ] Vue から Phaser への操作インテント送信と結果受信のインターフェースを設計する。
